name: SmartDoc Demo
run-name: Testing out GitHub Actions 
on: 
    pull_request:
        paths:
            - "**/*.yaml"
            - "**/*.yml"
jobs:
    smartdoc-analyze:
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v4

            - uses: actions/setup-python@v5
              with:
                python-version: "3.11"

            - name: Install SmartDoc
              run: pip install git+https://github.com/itsdeannat/smartdoc.git@release/0.5.0
            - run: echo "ðŸŽ‰ SmartDoc installed!"
            - name: Analyze a file
              env:
                OPENAI_API_KEY: ${{ secrets.OPENAI_API_KEY }}
              run: smartdoc analyze schema.yml --fail-on responses.missing_descriptions=2